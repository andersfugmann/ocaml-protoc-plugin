<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Writer (ocaml-protoc-plugin.Ocaml_protoc_plugin.Writer)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">ocaml-protoc-plugin</a> &#x00BB; <a href="../index.html">Ocaml_protoc_plugin</a> &#x00BB; Writer</nav><header class="odoc-preamble"><h1>Module <code><span>Ocaml_protoc_plugin.Writer</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-mode"><a href="#type-mode" class="anchor"></a><code><span><span class="keyword">type</span> mode</span><span> = </span></code><ol><li id="type-mode.Balanced" class="def variant constructor anchored"><a href="#type-mode.Balanced" class="anchor"></a><code><span>| </span><span><span class="constructor">Balanced</span></span></code></li><li id="type-mode.Speed" class="def variant constructor anchored"><a href="#type-mode.Speed" class="anchor"></a><code><span>| </span><span><span class="constructor">Speed</span></span></code></li><li id="type-mode.Space" class="def variant constructor anchored"><a href="#type-mode.Space" class="anchor"></a><code><span>| </span><span><span class="constructor">Space</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span><span class="optlabel">?mode</span>:<a href="#type-mode">mode</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?block_size</span>:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Create a new writer to hold serialized data. The writer also controls how data is serialized and allows for different modes of operation though the <code>mode</code> parameter: <code>Balanced</code>:: Serializes data in a strictly compliant mode. Balance space and speed. <code>Speed</code>:: Applies optimization which is exploiting the protobuf wire format (but not violating it). Its believed to be safe, but may confuse other protobuf deserializers. The optimization mainly speeds up serialization of large recursive message types. Resulting protobuf serialization is slightly larger than needed, but is comparable to <code>Space</code> mode in terms of extra memory used while serialization. <code>Space</code>:: Limits space overhead (space waste) caused when allocated datablocks cannot be fully filled. The mode causes multiple data copies while serializing to avoid space overhead. This is the default.</p><p><code>block_size</code> controls the minimum size of block allocation. Setting this to zero will significantly slow down serialization but reduce space overhead. Setting a high value may cause more space overhead, esp. for recursive message structures. The default is to allocate block of size 120. This size is choosen to avoid heap allocation (<code>malloc</code>) for Ocaml 5.0.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-contents"><a href="#val-contents" class="anchor"></a><code><span><span class="keyword">val</span> contents : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get the protobuf encoded contents of the writer</p></div></div></div></body></html>
